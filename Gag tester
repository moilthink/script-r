-- current toggle [5]
local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()

local Window = Library:CreateWindow{
    Title = `Banana-grow [ DEV ]`,
    SubTitle = "V-0.1.1",
    TabWidth = 160,
    Size = UDim2.fromOffset(830, 525),
    Resize = true, -- Resize this ^ Size according to a 1920x1080 screen, good for mobile users but may look weird on some devices
    MinSize = Vector2.new(470, 380),
    Acrylic = false, -- The blur may be detectable, setting this to false disables blur entirely
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl -- Used when theres no MinimizeKeybind
}

local HttpService = game:GetService("HttpService")

local url = "https://raw.githubusercontent.com/moilthink/script-r/refs/heads/main/Data.lua"

local function loadAllData(url)
    local success, response = pcall(function()
        return game:HttpGet(url)
    end)
    if not success then return {} end

    local func = loadstring(response)
    if not func then return {} end

    local ok, data = pcall(func)
    if not ok then return {} end

    return data
end

local data = loadAllData(url)
local shopdata = data.ShopData or {}
local seeddata = data.SeedData or {}

local Tabs = {
    Main = Window:CreateTab{
        Title = "Tab Shop",
        Icon = "nil"
    }
}

local cosmeticNames = {}
for name in pairs(shopdata) do
    table.insert(cosmeticNames, name)
end

local selectedCosmeticItems = {}

local MultiDropdown = Tabs.Main:CreateDropdown("MultiDropdown", {
    Title = "Cosmetic Item",
    Description = "",
    Values = cosmeticNames,
    Multi = true,
    Default = {},
})

MultiDropdown:OnChanged(function(Value)
    selectedCosmeticItems = {}
    for cosmeticName, isSelected in pairs(value) do
        if isSelected then
            table.insert(selectedCosmeticItems, cosmeticName)
        end
    end
end)

local Toggle2 = Tabs.Main:CreateToggle("MyToggle", {Title = "Toggle", Default = false })

Toggle2:OnChanged(function()
    if not Toggle2Interacted then
        Toggle2Interacted = true
        return
    end

    BuyCosmeticItemEnabled = not BuyCosmeticItemEnabled

    if BuyCosmeticItemEnabled then
        task.spawn(function()
            while BuyCosmeticItemEnabled do
                for _, cosmeticName in ipairs(selectedCosmeticItems) do
                    game:GetService("ReplicatedStorage").GameEvents.BuyCosmeticItem:FireServer(cosmeticName)
                    task.wait(0.5)
                end
            end
        end)
    end
end)

local seedNames = {}
for name in pairs(seeddata) do
    table.insert(seedNames, name)
end

local selectedSeeds = {}

local MultiDropdown = Tabs.Main:CreateDropdown("MultiDropdown", {
    Title = "Seed",
    Description = "",
    Values = seedNames,
    Multi = true,
    Default = {},
})

MultiDropdown:OnChanged(function(Value)
    selectedSeeds = {}
    for seedName, isSelected in pairs(value) do
        if isSelected then
            table.insert(selectedSeeds, seedName)
        end
    end
end)

local Toggle1 = Tabs.Main:CreateToggle("MyToggle", {Title = "Toggle", Default = false })
Toggle1:OnChanged(function()
    if not Toggle1Interacted then
        Toggle1Interacted = true
        return
    end

    BuySeedEnabled = not BuySeedEnabled

    if BuySeedEnabled then
        task.spawn(function()
            while BuySeedEnabled do
                for _, seedName in ipairs(selectedSeeds) do
                    game:GetService("ReplicatedStorage").GameEvents.BuySeedStock:FireServer(seedName)
                    task.wait(0.5) -- only wait here
                end
            end
        end)
    end
end)
